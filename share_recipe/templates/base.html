<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %} - Cook & Share</title>
    <!-- Thêm Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    {% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='login.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='detail.css') }}">
    <style>
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .brand-text {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 700;
            color: #28a745;
            margin: 0;
            text-decoration: none;
        }
        .recipe-card {
            background: #fff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            margin-bottom: 20px;
            width: 100%;
            max-width: 500px;
            position: relative;
            height: 450px;
            display: flex;
            flex-direction: column;
        }

        .recipe-card:hover {
            transform: translateY(-5px);
        }

        .recipe-link {
            text-decoration: none;
            color: inherit;
            display: block;
            position: relative;
            height: 100%;
        }

        .recipe-image {
            width: 100%;
            height: 60%;
            overflow: hidden;
            position: relative;
        }

        .recipe-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .recipe-info {
            padding: 20px;
            background: #fff;
            position: relative;
            height: 40%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .recipe-title {
            margin: 0;
            font-size: 1.5rem;
            color: #333;
            font-weight: 700;
            text-align: center;
            line-height: 1.2;
            padding: 20px 0;
            font-family: 'Montserrat', sans-serif;
            position: relative;
            background: linear-gradient(45deg, #28a745, #34ce57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .recipe-meta {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            font-size: 1rem;
            color: #666;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .recipe-author {
            margin: 0;
            font-weight: 500;
            color: #28a745;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .recipe-author i {
            color: #28a745;
        }

        .recipe-date {
            margin: 0;
            color: #666;
            font-size: 1rem;
            font-style: italic;
        }

        .recipe-date i {
            color: #666;
        }

        .recipe-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (max-width: 992px) {
            .recipe-row {
                grid-template-columns: 1fr;
            }
            .recipe-card {
                max-width: 100%;
            }
        }
    </style>
    {% endblock %}
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('blog.index') }}">
                <img src="{{ url_for('static', filename='uploads/logo/Logo_home.webp') }}" alt="Cook & Share" style="height: 50px;">
                <span class="brand-text">Cook & Share</span>
            </a>

            <div class="search-container">
                <form action="{{ url_for('blog.search') }}" method="get" class="search-box">
                    <input type="text" name="q" class="search-input" placeholder="Tìm kiếm công thức..." value="{{ request.args.get('q', '') }}">
                    <button type="submit" class="search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>

            <div class="user-actions">
                {% if g.user %}
                    <a href="{{ url_for('blog.create') }}" class="btn btn-dark btn-custom" title="Tạo công thức mới">
                        <i class="fas fa-plus"></i>
                    </a>
                    <div class="dropdown">
                        <button class="btn btn-dark btn-custom dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            {% if g.user.avatar_path %}
                                <img src="{{ url_for('static', filename=g.user.avatar_path) }}" class="user-avatar" alt="Avatar">
                            {% else %}
                                <i class="fas fa-user"></i>
                            {% endif %}
                            {{ g.user['username'] }}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li>
                                <a class="dropdown-item" href="{{ url_for('auth.profile') }}">
                                    <i class="fas fa-user-circle"></i> Hồ sơ của tôi
                                </a>
                            </li>
                            {% if g.user['role'] == 'admin' %}
                                <li>
                                    <a class="dropdown-item" href="{{ url_for('admin.dashboard') }}">
                                        <i class="fas fa-dashboard"></i> Quản lý
                                    </a>
                                </li>
                            {% endif %}
                            <li>
                                <a class="dropdown-item" href="{{ url_for('blog.favorites') }}">
                                    <i class="fas fa-heart"></i> Công thức yêu thích
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="{{ url_for('blog.saved_recipes') }}">
                                    <i class="fas fa-bookmark"></i> Công thức đã lưu
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" href="{{ url_for('auth.logout') }}">
                                    <i class="fas fa-sign-out-alt"></i> Đăng xuất
                                </a>
                            </li>
                        </ul>
                    </div>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="btn btn-dark btn-custom">
                        <i class="fas fa-sign-in-alt"></i> Đăng nhập
                    </a>
                    <a href="{{ url_for('auth.register') }}" class="btn btn-dark btn-custom">
                        <i class="fas fa-user-plus"></i> Đăng ký
                    </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Secondary Navigation Bar -->
    <nav class="navbar navbar-expand-lg bg-success">
        <div class="container">
            <div class="collapse navbar-collapse justify-content-center" id="categoryNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{{ url_for('blog.index') }}">Trang chủ</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Món ngon Việt Nam
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món nước') }}">Món nước</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món cuốn') }}">Món cuốn</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món xào') }}">Món xào</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món kho') }}">Món kho</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món ăn truyền thống') }}">Món ăn truyền thống</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Đặc sản vùng miền') }}">Đặc sản vùng miền</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Món ăn chay
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món chay từ đậu hũ') }}">Món chay từ đậu hũ</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món chay từ rau củ') }}">Món chay từ rau củ</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Lẩu chay') }}">Lẩu chay</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Cơm chay') }}">Cơm chay</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món chay giả mặn') }}">Món chay giả mặn</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Món ăn kiêng
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Keto') }}">Keto</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Eat Clean') }}">Eat Clean</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Low-carb') }}">Low-carb</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Chế độ giảm cân') }}">Chế độ giảm cân</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Món ăn dịp lễ
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Tết') }}">Món Tết</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Trung Thu') }}">Món Trung Thu</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Giáng Sinh') }}">Món Giáng Sinh</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món ăn ngày cưới') }}">Món ăn ngày cưới</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Món ăn Tây
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Ý') }}">Món Ý</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Pháp') }}">Món Pháp</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Mỹ') }}">Món Mỹ</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Nhật') }}">Món Nhật</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Món Hàn') }}">Món Hàn</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Đồ uống
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Nước ép') }}">Nước ép</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Sinh tố') }}">Sinh tố</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Trà') }}">Trà</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Cà phê') }}">Cà phê</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('blog.category', category='Cocktail & Mocktail') }}">Cocktail & Mocktail</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Thêm div này để tránh content bị che khi navbar fixed -->
    <div class="navbar-spacer"></div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category if category != 'message' else 'info' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div class="main-container">
        <div class="content">
            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <!-- About Us Column -->
                <div class="col-md-4 mb-4">
                    <h2 class="footer-heading mb-4">Về chúng tôi</h2>
                    <p>Cook & Share chính là một nơi lý tưởng để bạn thể hiện sở thích, niềm đam mê với công việc nấu ăn.</p>
                    <p>Là trang chuyên về nấu ăn, Cook & Share đã được xây dựng bởi những sinh viên tại trường Công nghiệp TP.HCM có niềm đam mê và sự nhiệt huyết muốn đóng góp những công thức nấu ăn ngon cho bữa cơm của hầu hết gia đình Việt.</p>
                </div>

                <!-- Contact Info Column -->
                <div class="col-md-4 mb-4">
                    <h2 class="footer-heading mb-4">Thông tin</h2>
                    <div class="contact-info">
                        <p><i class="fas fa-phone me-2"></i>SĐT: 0333163620</p>
                        <p><i class="fas fa-envelope me-2"></i>Email: nguyenthanhquyen145@gmail.com</p>
                        <p><i class="fas fa-phone me-2"></i>SĐT: 0333163620</p>
                        <p><i class="fas fa-envelope me-2"></i>Email: nguyenthanhquyen145@gmail.com</p>
                        <p><i class="fas fa-phone me-2"></i>SĐT: 0333163620</p>
                        <p><i class="fas fa-envelope me-2"></i>Email: nguyenthanhquyen145@gmail.com</p>
                        <p><i class="fas fa-phone me-2"></i>SĐT: 0333163620</p>
                        <p><i class="fas fa-envelope me-2"></i>Email: nguyenthanhquyen145@gmail.com</p>
                    </div>
                </div>

                <!-- Social Media Column -->
                <div class="col-md-4 mb-4">
                    <h2 class="footer-heading mb-4">Mạng xã hội</h2>
                    <div class="social-links">
                        <a href="#" class="social-link me-3">
                            <i class="fab fa-facebook fa-2x"></i>
                        </a>
                        <a href="#" class="social-link me-3">
                            <i class="fab fa-instagram fa-2x"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-youtube fa-2x"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>